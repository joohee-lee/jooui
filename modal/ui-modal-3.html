<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jooui - modal </title>
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" href="../css/reset.css">
<style>
body{
	margin: 20px;
}
.modal-back{ 
 	position: fixed;
 	left: 0;
 	top: 0;
 	right: 0;
 	bottom: 0;
 	width: 100%;
 	height: 100%;
 	background-color: #000;
 	opacity: 0;
 	display: none;
 	z-index: 1000;
 }	 	


.modal{
	position: fixed;
 	left: 0;
 	top: 0;
 	right: 0;
 	bottom: 0;
 	overflow: hidden;
 	z-index: 1001;
}

.modal-dialog{
	position: relative;
	margin: 40px auto;
	width: 80%;
	
}	

.modal-content{
	border: 1px solid #ddd;
	border-radius: 4px;
	background-color: #fff;
	z-index: 1003;
}

.modal-header{ 
	position: relative;
	border-bottom: 1px solid #ddd; 
	padding: 10px;
}
.modal-header .btn-close{ 
	position: absolute;
	right: 10px;
	top: 10px;
}

.modal-header h5{ font-size: 20px; }
.modal-body{
	padding: 20px
}
.modal-footer{
	text-align: right;
	padding: 10px;
	border-top: 1px solid #ddd;
}
	
button{
	border: 1px solid #ddd;
	padding: 4px;
}	

a:focus{

	border: 1px solid blue;
}

/* control */
.modal-open{
	overflow: hidden;
}
.modal-open .modal{
	overflow-x: hidden;
	overflow-y: auto;
}
.modal-open .modal-back{ opacity: .5; display: block;}
.modal[data-hidden="true"]{ display: none; }
.modal[data-hidden="false"]{ display: block; }


</style>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="../js/ui.js"></script>

</head>
<body>
<h2># Modal</h2>
<!-- Button trigger modal -->
<div class="btn-area">
	<button  class="btn btn-modal" data-toggle="modal" onclick="toggleModal('exampleModal-1', this);">Modal-1-default</button>
	<button type="button"class="btn btn-modal" onclick="toggleModal('exampleModal-2', this);">Modal-2-default</button>
</div>


<!-- Modal -->
<div id="exampleModal-1" class="modal" tabindex="-1" role="dialog" data-hidden="true">
	<div class="modal-dialog" role="document">
		
		<div class="modal-content">
			  <div class="modal-header">
				    <h5 class="modal-title">#Modal title--1</h5>
				    <button type="button"  class="btn-close" data-id="btn1" onclick="toggleModal('exampleModal-1');">X
				    </button>
			  </div>
			  <div class="modal-body">
			    ...
			  </div>
			  <div class="modal-footer">
				    <button type="button" class="btn btn-grey" data-id="btn1" onclick="toggleModal('exampleModal-1');">Close</button>
			  </div>
		</div>

	</div>
</div>

<!-- Modal -->
<div id="exampleModal-2" class="modal" tabindex="-1" role="dialog"  data-hidden="true">
	<div class="modal-dialog" role="document">
		
		<div class="modal-content">
			  <div class="modal-header">
				    <h5 class="modal-title">#Modal title--2</h5>
				    <button type="button" class="btn-close" data-id="btn2"  onclick="toggleModal('exampleModal-2');" >
				      <span aria-hidden="true">X</span>
				    </button>
			  </div>
			  <div class="modal-body">
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			   	<p> e.currentTarget.style.visibility = "hidden";</p>
			  </div>
			  <div class="modal-footer">
				    <button type="button" class="btn btn-grey" data-id="btn2" onclick="toggleModal('exampleModal-2');">Close</button>
			  </div>
		</div>

	</div>
</div>

 <div id="modalBack" class="modal-back"></div>

<script>
/*
event.currentTarget.dataset.id
// as array element
event.currentTarget.dataset['id']
// jquery method
$(event.currentTarget).data('id')

*/

var elBody = document.body;
var elDimmed = document.getElementById('modalBack');
var hideTarget;

var toggleModal = function( cpnt, el ){

	//console.log(this);
	var elModal = document.getElementById(cpnt);
	var elModalBtn = elModal.querySelector('.btn-close')
	var dataHidden = dataset.getData(elModal, 'data-hidden');
	
	if( dataHidden === 'true' ){
	
		classlist.addClass( elBody, 'modal-open');
		dataset.setData(elModal, 'data-hidden', false);

		//first close button element - focus
		elModalBtn.focus();
		hideTarget = el;
	
	}else{

		classlist.removeClass( elBody, 'modal-open');
		dataset.setData(elModal, 'data-hidden', true);
		
		if(hideTarget){
			hideTarget.focus();
			hideTarget = undefined;
		}	
	}

};

var clickModalBg = function(){

	var elModals = document.querySelectorAll('.modal')
	var elModalsleng = elModals.length;
			
	classlist.removeClass( this.elBody, 'modal-open');
	for(var i=0; i < elModalsleng; i++){
		console.log(elModals[i]);
		dataset.setData( elModals[i], 'data-hidden', true);
		//classlist.removeClass(  elModals[i], 'show');
	}		

};

</script>


</body>
</html>